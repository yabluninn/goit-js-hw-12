{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nimport iziToast from \"izitoast\";\n\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nlet perPage = 15;\n\nexport const getImagesByQuery = async (query, page) => {\n  try {\n    const response = await axios.get(`https://pixabay.com/api/?key=50871412-165a861e59de274a11f9f1fdc&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`);\n\n    const { hits, totalHits } = response.data;\n\n    if (hits.length === 0) {\n      iziToast.error({\n        message: 'Sorry, no images found. Try another search.',\n      });\n      return { hits: [], totalHits: 0 };\n    }\n\n    return { hits, totalHits };\n  } catch (error) {\n    console.error(error);\n    iziToast.error({\n      message: 'Something went wrong. Please try again later.',\n    });\n    return { hits: [], totalHits: 0 };\n  }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadMoreButton = document.querySelector(\".load-more-button\");\n\nlet lightbox = null;\n\nexport const createGallery = (images) => {\n  const markup = images.map((image) => {\n    return `\n      <li class=\"image-container\">\n        <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n        </a>\n        <div class=\"image-footer\">\n          <p><b>Likes</b>: ${image.likes}</p>\n          <p><b>Views</b>: ${image.views}</p>\n          <p><b>Comments</b>: ${image.comments}</p>\n          <p><b>Downloads</b>: ${image.downloads}</p>\n        </div>\n      </li>\n    `;\n  }).join(\"\");\n\n  gallery.insertAdjacentHTML(\"beforeend\", markup);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  } else {\n    lightbox.refresh();\n  }\n};\n\nexport const clearGallery = () => {\n  gallery.innerHTML = \"\";\n};\n\nexport function showLoader() {\n  loader.style.display = \"block\";\n}\n\nexport function hideLoader() {\n  loader.style.display = \"none\";\n}\n\nexport function showLoadMoreButton() {\n  loadMoreButton.style.display = \"block\";\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreButton.style.display = \"none\";\n}","import { getImagesByQuery } from './js/pixabay-api.js';\nimport {\n  clearGallery,\n  createGallery,\n  hideLoader,\n  hideLoadMoreButton,\n  showLoader,\n  showLoadMoreButton,\n} from './js/render-functions.js';\nimport iziToast from 'izitoast';\n\nconst form = document.querySelector(\".form\");\nconst input = document.querySelector(\".search-input\");\nconst loadMoreButton = document.querySelector(\".load-more-button\");\n\nlet page = 1;\nlet latestQuery = \"\";\nlet totalAvailable = 0;\nconst perPage = 15;\n\nhideLoadMoreButton();\n\nform.addEventListener(\"submit\", async (e) => {\n  e.preventDefault();\n\n  const query = input.value.trim();\n\n  if (query === \"\") return;\n  showLoader();\n\n  if (query !== latestQuery) {\n    latestQuery = query;\n    clearGallery();\n    page = 1;\n  }\n\n  try {\n    const { hits, totalHits } = await getImagesByQuery(query, page);\n    totalAvailable = totalHits;\n\n    if (hits.length > 0) {\n      createGallery(hits);\n      page++;\n\n      if ((page - 1) * perPage >= totalAvailable) {\n        hideLoadMoreButton();\n        iziToast.info({\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      } else {\n        showLoadMoreButton();\n      }\n    }\n  } catch (err) {\n    console.error(\"Error loading images:\", err);\n  } finally {\n    hideLoader();\n  }\n});\n\nloadMoreButton.addEventListener(\"click\", async () => {\n  showLoader();\n\n  try {\n    const { hits } = await getImagesByQuery(latestQuery, page);\n\n    if (hits.length > 0) {\n      createGallery(hits);\n      page++;\n\n      smoothScroll();\n\n      if ((page - 1) * perPage >= totalAvailable) {\n        hideLoadMoreButton();\n        iziToast.info({\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      }\n    }\n  } catch (err) {\n    console.error(\"Error loading images:\", err);\n  } finally {\n    hideLoader();\n  }\n})\n\nfunction smoothScroll() {\n  const firstCard = document.querySelector(\".gallery .image-container\");\n  if (firstCard) {\n    const { height } = firstCard.getBoundingClientRect();\n\n    window.scrollBy({\n      top: height * 2,\n      behavior: \"smooth\",\n    });\n  }\n}\n"],"names":["perPage","getImagesByQuery","query","page","response","axios","hits","totalHits","iziToast","error","gallery","loader","loadMoreButton","lightbox","createGallery","images","markup","image","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","input","latestQuery","totalAvailable","e","err","smoothScroll","firstCard","height"],"mappings":"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"}